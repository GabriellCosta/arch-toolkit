apply plugin: 'io.github.pedro-bachiega.sonatype-maven-publish'

group = GROUP
version = VERSION

sonatypePublishing {
    repositoryUrl = REPO_URL
    repositoryConnectionUrl = REPO_GIT_URL
    licenseName = LICENCE_NAME
    licenseUrl = LICENCE_URL
    developerId = System.getenv("DEVELOPER_ID") ? System.getenv("DEVELOPER_ID") : DEVELOPER_ID
    developerName = System.getenv("DEVELOPER_NAME") ? System.getenv("DEVELOPER_NAME") : DEVELOPER_NAME
    developerEmail = System.getenv("DEVELOPER_EMAIL") ? System.getenv("DEVELOPER_EMAIL") : DEVELOPER_EMAIL
    username = System.getenv("OSSRH_USERNAME") ? System.getenv("OSSRH_USERNAME") : OSSRH_USERNAME
    password = System.getenv("OSSRH_PASSWORD") ? System.getenv("OSSRH_PASSWORD") : OSSRH_PASSWORD
}

signing {
    setRequired {
        // signing is only required if the artifacts are to be published
        gradle.taskGraph.allTasks.any { (it instanceof PublishToMavenRepository) }
    }
}

publications {
    library {
        artifactId = project.name
        libName = NAME
        libDescription = DESCRIPTION
    }
}

